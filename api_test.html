<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <title>Api test (책검색)</title>
</head>

<body>
    <div class="container py-4">
        <h3 class="mb-4">✨ 책제목을 입력하시고 검색하세요.</h3>
        <form id="searchForm" class="mb-4">
            <div class="input-group">
                <input class="form-control" type="text" id="searchQuery" placeholder="책제목을 입력하세요">
                <button class="btn btn-primary" type="submit">검색</button>
            </div>
        </form>
        <h4 id="bookTitle"></h4>
        <span id="bookAuthor"></span>
        <p id="bookContents"></p>
        <div id="bookThumbnail"></div>
        <small id="bookPublisher"></small>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
    <script>
        $("#searchForm").submit(function (event) {
            event.preventDefault();
            var query = $("#searchQuery").val();
            if (query) {
                $.ajax({
                    method: "GET",
                    url: "https://dapi.kakao.com/v3/search/book?target=title",
                    data: { query: query },
                    headers: { Authorization: "KakaoAK 8c28987d6671ebc8c75c14bf66efb694" }
                })
                    .done(function (msg) {
                        console.log(`제목: ${msg.documents[1].title}`);
                        console.log(`썸네일: ${msg.documents[1].thumbnail}`);
                        $("#bookTitle").html("<strong>" + msg.documents[0].title + "</strong>");
                        $("#bookContents").html("<strong>" + msg.documents[0].contents + "</strong>");
                        $("#bookAuthor").html("<strong>" + msg.documents[0].authors + "</strong>");
                        $("#bookThumbnail").html("<img src='" + msg.documents[0].thumbnail + "'/>");
                        $("#bookPublisher").html("출판사: " + msg.documents[0].publisher);
                    });
            }
        });
    </script>
</body>

</html>