<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script>
    function submitForm(event) {
        event.preventDefault();
        var form = document.getElementById('signupForm');
        var signatureImage = canvas.toDataURL(); // 서명을 이미지 데이터 URL로 변환
        var attachment = form.attachment.files[0];
        var formData = {
          name: form.name.value,
          email: form.email.value,
          signature: signatureImage,
          attachment: attachment
        };
        google.script.run.processForm(formData);
        form.reset();
        clearSignature();
        alert('가입 신청서가 제출되었습니다.');
      }
      </script>
      <style>
        body {
          margin: 10px;
        }
        #signatureCanvas {
          box-shadow:0px 3px 6px grey;
          border-radius: 5px;
          border: 1px solid black;
        }
        </style>
  </head>
  <body>
    <form id="signupForm"  onsubmit="submitForm(event)">
      <label class="form-label" for="name">🤷‍♂️이름:</label>
      <input class="form-control" type="text" id="name" name="name" required><br>
      <label for="email">📧이메일:</label>
      <input class="form-control" type="email" id="email" name="email" required><br>
      <div class="mb-3">
      <label class="form-label" for="signature">📝자필서명:</label>
      <canvas id="signatureCanvas" width="300" height="150"></canvas>
      </div>
      <div class="form-group">
        <label for="attachment">첨부 파일:</label>
        <input type="file" id="attachment" name="attachment" accept=".png, .jpg, .jpeg, .gif">
        <p class="upload-label">이미지 파일을 선택하세요. (PNG, JPG, GIF)</p>
      </div>
     <div class="mb-3">
      <button class="btn btn-primary" type="submit">✔제출하기</button>
      </div>
    </form>
    <script>
      var canvas = document.getElementById('signatureCanvas');
      var ctx = canvas.getContext('2d');
      ctx.lineWidth = 2;
      var isDrawing = false;
      
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);
      
      function startDrawing(event) {
        isDrawing = true;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.beginPath();
        ctx.moveTo(x, y);
      }
      
      function draw(event) {
        event.preventDefault();
        if (!isDrawing) return;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.lineTo(x, y);
        ctx.stroke();
      }
      
      function stopDrawing() {
        isDrawing = false;
      }
      
      function clearSignature() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
        </script>
      </body>
    </html>
